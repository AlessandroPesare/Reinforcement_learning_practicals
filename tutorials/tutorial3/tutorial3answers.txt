Question 1:
...
Question 2/5/6/7/8

programming

Question 3:
mc/ctrl/ratio â€“ Importance-sampling ratio in off-policy MC con- trol.
In the off-policy MC-control algorithm in [1, Section 5.7], the importance- sampling ratio is updated according to
ğ‘Šâˆ¶= ğ‘Š , ğ‘(ğ´ğ‘¡|ğ‘†ğ‘¡)
although the definition of the importance-sampling ratio ğœŒğ‘¡âˆ¶ğ‘‡ âˆ’1 implies ğ‘Š âˆ¶= ğœ‹(ğ´ğ‘¡|ğ‘†ğ‘¡)ğ‘Š.
ğ‘(ğ´ğ‘¡|ğ‘†ğ‘¡)
Why is the update in the algorithm nevertheless correct?

Because Ï€ is a deterministic 0â€“1 policy, any time Ï€ would insert a factor 0 you break and stop accumulating.
On the steps you do accumulate, Ï€=1, so
Ï€/b=1/b
and Wâ†W/b(Atâˆ£St)